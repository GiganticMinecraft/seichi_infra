# Values for argocd. See
# https://github.com/argoproj/argo-helm/blob/3a2858aa98f607b495d34db0da2a7a3ecad3eaa0/charts/argo-cd/values.yaml
# for default values.
# argo-cd is aliased to argocd
argocd:
  # config of server
  # https://github.com/argoproj/argo-helm/blob/3a2858aa98f607b495d34db0da2a7a3ecad3eaa0/charts/argo-cd/values.yaml#L781
  server:
    # We will only configure ArgoCD itself here, and expect definition at
    # proxy-kubernetes/argocd-apps of https://github.com/GiganticMinecraft/seichi_infra
    # to further configure the ArgoCD application (via App of Apps pattern)
    additionalApplications:
      - name: argocd
        namespace: argocd
        finalizers:
          - resources-finalizer.argocd.argoproj.io
        destination:
          namespace: argocd
          server: https://kubernetes.default.svc
        project: argocd
        source:
          path: proxy-kubernetes/argocd-apps
          repoURL: https://github.com/GiganticMinecraft/seichi_infra
          targetRevision: main
        syncPolicy:
          automated:
            prune: true
    additionalProjects:
      - name: argocd
        namespace: argocd
        description: The Top-Level Project
        sourceRepos:
          - '*'
        destinations:
          - namespace: argocd
            server: https://kubernetes.default.svc
        clusterResourceWhitelist:
          - group: '*'
            kind: '*'
        orphanedResources:
          warn: true
