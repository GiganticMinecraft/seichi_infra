# Config for bootstrapping ArgoCD.
# For default values, see
# https://github.com/argoproj/argo-helm/blob/3a2858aa98f607b495d34db0da2a7a3ecad3eaa0/charts/argo-cd/values.yaml
server:
  additionalApplications:
    - name: argocd-root-app-of-apps
      namespace: argocd
      project: argocd-root
      source:
        repoURL: https://github.com/GiganticMinecraft/seichi_infra
        targetRevision: main
        path: proxy-kubernetes/argocd/apps/root
      destination:
        server: https://kubernetes.default.svc
        namespace: argocd
      syncPolicy:
        automated:
          prune: true
          selfHeal: true
          allowEmpty: true
        syncOptions:
          - CreateNamespace=true
        retry:
          limit: -1
          backoff:
            duration: 5s
            factor: 2
            maxDuration: 2h

  additionalProjects:
    - name: argocd-root
      namespace: argocd
      description: The top-level project
      sourceRepos:
        - '*'
      destinations:
        - namespace: '*'
          server: https://kubernetes.default.svc
      clusterResourceWhitelist:
        - group: '*'
          kind: '*'
