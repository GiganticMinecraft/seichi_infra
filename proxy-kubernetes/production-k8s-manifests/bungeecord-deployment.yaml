# オブジェクトを削除する際はこのファイルの定義を削除＋k8s上の該当オブジェクトをkubectlで手動削除してください

# bungeecordのdeployment
apiVersion: apps/v1
kind: Deployment
metadata:
  name: bungeecord
  labels:
    app: bungeecord
    env: prod
spec:
  replicas: 0
  selector:
    matchLabels:
      app: bungeecord
      env: prod
  template:
    metadata:
      labels:
        app: bungeecord
        env: prod
    spec:
      imagePullSecrets:
      - name: seichi-network-gcr-private-image
      containers:
      - name: bungeecord
        image: gcr.io/manifest-shell-237511/seichi-gw-bungeecord:latest
        env:
        - name: MEMORY
          value: "1024m"
        resources:
          requests:
            memory: 1024Mi
---
apiVersion: networking.k8s.io/v1
kind: NetworkPolicy
metadata:
  name: bungeecord--default-deny-egress-all
spec:
  podSelector:
    matchLabels:
      app: bungeecord
      env: prod
---
kind: NetworkPolicy
apiVersion: networking.k8s.io/v1
metadata:
  name: bungeecord--allow-egress-dns
spec:
  podSelector:
    matchLabels:
      app: bungeecord
      env: prod
---
kind: NetworkPolicy
apiVersion: networking.k8s.io/v1
metadata:
  name: bungeecord--allow-egress-www
spec:
  podSelector:
    matchLabels:
      app: bungeecord
      env: prod
---
kind: NetworkPolicy
apiVersion: networking.k8s.io/v1
metadata:
  name: bungeecord--allow-egress-cloudflared
spec:
  podSelector:
    matchLabels:
      app: bungeecord
      env: prod
  egress:
  - to:
    - podSelector:
        matchLabels:
          appgroup: cloudflared
          env: prod
