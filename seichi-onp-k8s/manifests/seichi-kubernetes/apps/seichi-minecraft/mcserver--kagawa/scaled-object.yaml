apiVersion: keda.sh/v1alpha1
kind: ScaledObject
metadata:
  name: cron-scaledobject--kagawa
spec:
  scaleTargetRef:
    name: mcserver--kagawa
    kind: StatefulSet
  # 04:05 から翌日の 04:00 までレプリカ数を 1 にすることで、
  # 04:00 に再起動がされるようにする
  triggers:
    - type: cron # FIXME: 香川時間に直すのと複数のcronトリガーが発火できるか確認
      metadata:
        timezone: Asia/Tokyo
        # "At 04:05." https://crontab.guru/#5_4_*_*_*
        start: 5 4 * * *
        # "At 04:00." https://crontab.guru/#0_4_*_*_*
        end: 0 4 * * *
        desiredReplicas: "1"
