FROM ghcr.io/giganticminecraft/chunk-search-rs:sha-74140b1 AS chunk-search-provider
FROM ghcr.io/giganticminecraft/seichi_minecraft_server_base:1.0.0-java17-jdk@sha256:f1aef6980a73254b62d0f8e9043c753c6be563e23b5b2c3afe44f4727a28db4c

ENV VERSION="1.18.2"

# プラグインの設定ファイル
COPY --link ./additional-plugin-configs /plugins
COPY --link ./common-minecraft-server-configs /config

COPY --link --from=chunk-search-provider /build/chunk-search-rs /usr/bin/chunk-search-rs

###
# 環境変数として指定されるべきプラグインの設定
#
ENV CFG_REPLACEMENT__COREPROTECT_MYSQL_HOST=""
ENV CFG_REPLACEMENT__COREPROTECT_MYSQL_PORT=""
ENV CFG_REPLACEMENT__COREPROTECT_MYSQL_USER=""
ENV CFG_REPLACEMENT__COREPROTECT_MYSQL_DATABASE_NAME=""
ENV CFG_REPLACEMENT__COREPROTECT_MYSQL_PASSWORD=""

ENV CFG_REPLACEMENT__LUCKPERMS_SERVER_NAME=""
ENV CFG_REPLACEMENT__LUCKPERMS_MYSQL_HOST=""
ENV CFG_REPLACEMENT__LUCKPERMS_MYSQL_PORT=""
ENV CFG_REPLACEMENT__LUCKPERMS_MYSQL_USER=""
ENV CFG_REPLACEMENT__LUCKPERMS_MYSQL_DATABASE_NAME=""
ENV CFG_REPLACEMENT__LUCKPERMS_MYSQL_PASSWORD=""

# e.g. "9225"
ENV CFG_REPLACEMENT__PROMETHEUS_EXPORTER_PORT=""

# originally it was "\\192.168.xxx.xxx\seichi-share\schematics"
ENV CFG_REPLACEMENT__WORLDEDIT_SCHEMATICS_DIRECTORY=""

ENV CFG_REPLACEMENT__SEICHIASSIST_DB_HOST=""
ENV CFG_REPLACEMENT__SEICHIASSIST_DB_PORT=""
ENV CFG_REPLACEMENT__SEICHIASSIST_DB_USER=""
ENV CFG_REPLACEMENT__SEICHIASSIST_DB_PASSWORD=""

ENV CFG_REPLACEMENT__SEICHIASSIST_SERVER_NUM=""
ENV CFG_REPLACEMENT__SEICHIASSIST_SERVER_ID=""

# Discord のチャットチャンネルへの Webhook
ENV CFG_REPLACEMENT__SEICHIASSIST_URL_WEBHOOK_NOTIFICATION=""

ENV CFG_REPLACEMENT__SEICHIASSIST_REDISBUNGEE_REDIS_HOST=""
ENV CFG_REPLACEMENT__SEICHIASSIST_REDISBUNGEE_REDIS_PORT=""

ENV CFG_REPLACEMENT__SEICHIASSIST_BUNGEESEMAPHORE_RESPONDER_REDIS_HOST=""
ENV CFG_REPLACEMENT__SEICHIASSIST_BUNGEESEMAPHORE_RESPONDER_REDIS_PORT=""
